\documentclass[a4paper,11pt,titlepage,twoside,openany]{book}

\usepackage{natbib}
\usepackage{setspace} \onehalfspacing
\usepackage{parskip}

\newcommand{\only}{proof}

\include{paper}
%include paper.fmt


% add horizontal lines above and below figures
\let\oldfigure\figure\let\oldendfigure\endfigure
\let\oldtable\table\let\oldendtable\endtable
\let\oldcaption\caption
\newcommand{\newcaption}[1]{\hrule\oldcaption{#1}}
\renewenvironment{figure}
    {\let\caption\newcaption\oldfigure\hrule}
    {\let\caption\oldcaption\oldendfigure}
\renewenvironment{table}
    {\let\caption\newcaption\oldtable\hrule}
    {\let\caption\oldcaption\oldendtable}

% simplify rules
\newenvironment{simplify}
    {\bigskip\begin{tabular*}{\linewidth}{@@{}p{10cm}@@{\extracolsep{\fill}}r}}
    {\end{tabular*}}
\newcommand{\simp}[2]{\vspace{-7mm} #2 & (#1) \\[-5mm]}

% margins
\addtolength{\topmargin}{-5mm}
\addtolength{\textheight}{10mm}

\newlength{\swapmargins}
\setlength{\swapmargins}{\oddsidemargin}
\setlength{\oddsidemargin}{\evensidemargin}
\setlength{\evensidemargin}{\swapmargins}


\newenvironment{console}
    {\begin{singlespace}\sf}
    {\end{singlespace}}


\begin{document}

\include{title}
\include{introduction}
\include{background}
\include{uniplate}
\include{supero}
\include{firstify}
\include{catch}
\include{proof}
\include{conclusion}

\bibliographystyle{plainnat}
\bibliography

\end{document}
